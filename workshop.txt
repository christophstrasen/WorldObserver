version=1
id=3637573373
title=[42SP] WorldObserver - A cooperative world-sensing engine.
description=[h1]WorldObserver[/h1]
description=
description=[i]A shared observation layer for [b]Project Zomboid (Build 42)[/b] mods.[/i] - part of the [url=https://github.com/christophstrasen/DREAM]DREAM[/url] family.
description=
description=[b]WorldObserver[/b] is a cooperative [i]world-sensing engine[/i] for Project Zomboid mods. Instead of hand-rolling `OnTick` scan batches, stitching together event listeners, and managing your own cache invalidation, you [b]declare interest[/b]—[i]what should we observe, what guarantees for scope and freshness do we need?[/i]—and subscribe to ready-made [b]observation streams[/b].
description=
description=This makes world-observation code compact and declarative. You compose readable pipelines and let the engine handle the execution.
description=
description=The result is [b]signal over noise[/b]: rather than processing raw world state, you consume fewer, more actionable observations that directly express [i]what you actually care about[/i].
description=
description=[h2]Tradeoffs[/h2]
description=With "WO", as with most high-level frameworks, you sacrifice some control over scope and timing that hand-rolled world-sensing logic provides, in exchange for a more compact, convenient, and expressive way to access a broad range of observations.
description=
description=Use it for features like [i]“corpse squares near the player”[/i], [i]“chef zombies in kitchens”[/i], or [i]“cars under attack”[/i]—and other situations that benefit from rich data and can tolerate asynchronous behavior.
description=
description=[h2]Good for the players[/h2]
description=When multiple mods would otherwise perform heavy scanning in parallel, WorldObserver can help them cooperate by merging overlapping interests, sharing the probing work, enforcing budgets and fairness, and keeping frame time predictable.
description=
description=[hr][/hr]
description=
description=[h2]Quickstart[/h2]
description=This example shows how you
description=
description=1) declare an interest (so WorldObserver knows what facts to gather)
description=2) subscribe to a base observation stream
description=3) stop cleanly (unsubscribe + stop lease)
description=
description=Full walkthrough:
description=
description=[list]
description=[*][url=https://github.com/christophstrasen/WorldObserver/blob/main/docs/quickstart.md]Quickstart[/url]
description=[/list]
description=
description=[code]
description=local WorldObserver = require("WorldObserver")
description=
description=local MOD_ID = "YourModId"
description=
description=-- note: duration in in-game seconds
description=local lease = WorldObserver.factInterest:declare(MOD_ID, "quickstart.squares", {
description=  type = "squares",
description=  scope = "near",
description=  target = { player = { id = 0 } },
description=  radius = { desired = 8 },     --tiles
description=  staleness = { desired = 4 },  -- typical duration between refresh
description=  cooldown = { desired = 10 },   -- time window in which emissions are suppressed
description=})
description=
description=local corpseSquares = WorldObserver.observations:squares()
description=  :squareHasCorpse()          -- try removing this line if you see no output
description=  :distinct("square", 10)
description=  :subscribe(function(observation)
description=    local s = observation.square
description=    print(("[WO] squareId=%s x=%s y=%s z=%s source=%s"):format(
description=      tostring(s.squareId),
description=      tostring(s.x),
description=      tostring(s.y),
description=      tostring(s.z),
description=      tostring(s.source)
description=    ))
description=
description=    -- Optional: brief visual feedback for the found square
description=    WorldObserver.highlight(s, 750, { color = { 1.0, 0.2, 0.2 }, alpha = 0.9 })
description=  end)
description=
description=_G.WOHello = {
description=  stop = function()
description=    if corpseSquares then corpseSquares:unsubscribe(); corpseSquares = nil end
description=    if lease then lease:stop(); lease = nil end
description=  end,
description=}
description=[/code]
description=
description=[h2]The model (facts → observations → your logic)[/h2]
description=[list]
description=[*][b]Facts[/b] are discovered by WorldObserver (listeners + probes) into which your mod declared an [b]interest[/b].
description=[*][b]Observation streams[/b] then emit plain Lua tables (“observations”) such as `observation.square` or `observation.zombie`
description=[*]These can be used as-is or further refined by your mod
description=[/list]
description=
description=[h2]What you get (that’s painful to hand-roll)[/h2]
description=[list]
description=[*][b]Shared work and fairness:[/b] when multiple mods declare overlapping interests, WorldObserver merges leases and runs shared probing/listening work.
description=[*][b]Safety settings:[/b] `radius`, `staleness`, `cooldown` let you express quality expectations while WorldObserver stays within budgets.
description=[*][b]Signal over noise:[/b] helpers + `distinct` let you compact raw updates into “interesting observations” your mod can act on.
description=[*][b]Composability:[/b] build derived streams by combining base streams (joins, windows, distinct). Start here: [url=https://github.com/christophstrasen/WorldObserver/blob/main/docs/guides/derived_streams.md]Derived streams[/url].
description=[/list]
description=
description=Under the hood, WorldObserver is powered by LQR + lua-reactivex, but you can ignore that until you need derived streams:
description=
description=[list]
description=[*][url=https://github.com/christophstrasen/LQR]https://github.com/christophstrasen/LQR[/url]
description=[/list]
description=
description=[h2]Status[/h2]
description=[list]
description=[*][b]Build:[/b] Project Zomboid Build 42 only.
description=[*][b]Scope:[/b] v0 is singleplayer-first (player id `0`).
description=[*][b]Stability:[/b] approaching beta; naming and shapes may still change.
description=[/list]
description=
description=[h2]Documentation[/h2]
description=[b]GitHub:[/b] [url=https://github.com/christophstrasen/WorldObserver]https://github.com/christophstrasen/WorldObserver[/url] (start here)
description=
description=[h2]Dependencies (required by mod.info)[/h2]
description=[list]
description=[*]StarlitLibrary
description=[*]DoggyLibrary
description=[*]reactivex
description=[*]LQR
description=[*]DREAMBase
description=[/list]
description=
description=[h2]Forking[/h2]
description=Modifications to this mod are welcome. Ideally as a PR on GitHub. You may publish your own version on the Steam Workshop under the condition that you give credit, clearly label the modded version and refer to the original. If in doubt get in touch via a GitHub issue.
tags=Framework;Build 42;
visibility=Public
